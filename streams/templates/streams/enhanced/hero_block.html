{% load wagtailcore_tags %}

{# Enhanced hero block template #}
<section class="hero-block relative overflow-hidden
                {% if value.height == 'sm' %}h-[400px]{% endif %}
                {% if value.height == 'md' %}h-[500px]{% endif %}
                {% if value.height == 'lg' %}h-[600px]{% endif %}
                {% if value.height == 'xl' %}h-[700px]{% endif %}
                {% if value.height == 'full' %}h-screen{% endif %}
                {% if value.height == 'auto' %}min-h-[400px]{% endif %}"
         id="{{ block.get_block_id }}">
    
    {# Background Image #}
    {% if value.background_image %}
        {% load wagtailimages_tags %}
        {% image value.background_image fill-1920x1080 as hero_bg %}
        <div class="hero-background absolute inset-0">
            <img src="{{ hero_bg.url }}" 
                 alt="" 
                 class="w-full h-full object-cover">
        </div>
    {% endif %}
    
    {# Background Video #}
    {% if value.background_video %}
        <div class="hero-video absolute inset-0">
            <iframe src="{{ value.background_video }}" 
                    class="w-full h-full object-cover pointer-events-none" 
                    frameborder="0" 
                    allow="autoplay; encrypted-media" 
                    allowfullscreen></iframe>
        </div>
    {% endif %}
    
    {# Overlay #}
    {% if value.overlay_opacity != '0' %}
        <div class="hero-overlay absolute inset-0 bg-black/{{ value.overlay_opacity }}"></div>
    {% endif %}
    
    {# Content #}
    <div class="hero-content relative z-10 flex items-center justify-center h-full
                {% if value.text_alignment == 'left' %}text-left{% endif %}
                {% if value.text_alignment == 'center' %}text-center{% endif %}
                {% if value.text_alignment == 'right' %}text-right{% endif %}
                {% if value.text_color == 'light' %}text-white{% endif %}
                {% if value.text_color == 'dark' %}text-neutral-900{% endif %}">
        
        <div class="hero-inner container-standard px-6 py-12">
            {# Heading #}
            <h1 class="hero-heading heading-4xl md:heading-5xl lg:heading-6xl mb-6 
                       {% if value.text_color == 'light' %}text-white{% endif %}
                       {% if value.text_color == 'dark' %}text-neutral-900{% endif %}
                       {% if value.text_color == 'auto' %}text-white{% endif %}">
                {{ value.heading }}
            </h1>
            
            {# Subheading #}
            {% if value.subheading %}
                <h2 class="hero-subheading text-xl md:text-2xl lg:text-3xl mb-6 font-light
                           {% if value.text_color == 'light' %}text-white/90{% endif %}
                           {% if value.text_color == 'dark' %}text-neutral-700{% endif %}
                           {% if value.text_color == 'auto' %}text-white/90{% endif %}">
                    {{ value.subheading }}
                </h2>
            {% endif %}
            
            {# Description #}
            {% if value.description %}
                <div class="hero-description text-lg md:text-xl mb-8 max-w-2xl
                            {% if value.text_alignment == 'center' %}mx-auto{% endif %}
                            {% if value.text_color == 'light' %}text-white/80{% endif %}
                            {% if value.text_color == 'dark' %}text-neutral-600{% endif %}
                            {% if value.text_color == 'auto' %}text-white/80{% endif %}">
                    {{ value.description|linebreaksbr }}
                </div>
            {% endif %}
            
            {# Action Buttons #}
            {% if value.buttons %}
                <div class="hero-buttons flex flex-col sm:flex-row gap-4 
                            {% if value.text_alignment == 'center' %}justify-center{% endif %}
                            {% if value.text_alignment == 'right' %}justify-end{% endif %}">
                    {% for button in value.buttons %}
                        {% include_block button %}
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </div>
    
    {# Scroll indicator (optional) #}
    {% if value.height == 'full' %}
        <div class="hero-scroll-indicator absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
            <div class="w-6 h-10 border-2 border-white/50 rounded-full flex justify-center">
                <div class="w-1 h-3 bg-white/50 rounded-full mt-2 animate-pulse"></div>
            </div>
        </div>
    {% endif %}
</section>